{% doc %}
  @prompt
    geenrate me a Tab accordion for shipping delivery and return
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-tab-accordion-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: {{ block.settings.padding }}px;
  }

  .ai-tab-accordion__tabs-{{ ai_gen_id }} {
    display: flex;
    gap: 8px;
    border-bottom: 1px solid {{ block.settings.border_color }};
    margin-bottom: 20px;
  }

  .ai-tab-accordion__tab-{{ ai_gen_id }} {
    padding: 12px 20px;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    font-size: {{ block.settings.tab_font_size }}px;
    color: {{ block.settings.tab_text_color }};
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .ai-tab-accordion__tab-{{ ai_gen_id }}:hover {
    color: {{ block.settings.tab_active_color }};
  }

  .ai-tab-accordion__tab-{{ ai_gen_id }}.active {
    color: {{ block.settings.tab_active_color }};
    border-bottom-color: {{ block.settings.tab_active_color }};
  }

  .ai-tab-accordion__content-{{ ai_gen_id }} {
    display: none;
  }

  .ai-tab-accordion__content-{{ ai_gen_id }}.active {
    display: block;
  }

  .ai-tab-accordion__item-{{ ai_gen_id }} {
    border-bottom: 1px solid {{ block.settings.border_color }};
  }

  .ai-tab-accordion__item-{{ ai_gen_id }}:last-child {
    border-bottom: none;
  }

  .ai-tab-accordion__header-{{ ai_gen_id }} {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 0;
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;
    font-size: {{ block.settings.accordion_font_size }}px;
    font-weight: 600;
    color: {{ block.settings.text_color }};
  }

  .ai-tab-accordion__icon-{{ ai_gen_id }} {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
    flex-shrink: 0;
    color: {{ block.settings.icon_color }};
  }

  .ai-tab-accordion__header-{{ ai_gen_id }}[aria-expanded="true"] .ai-tab-accordion__icon-{{ ai_gen_id }} {
    transform: rotate(180deg);
  }

  .ai-tab-accordion__body-{{ ai_gen_id }} {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .ai-tab-accordion__body-{{ ai_gen_id }}.active {
    max-height: 500px;
    padding-bottom: 16px;
  }

  .ai-tab-accordion__text-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.content_font_size }}px;
    line-height: 1.6;
  }

  @media screen and (max-width: 749px) {
    .ai-tab-accordion__tabs-{{ ai_gen_id }} {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .ai-tab-accordion__tab-{{ ai_gen_id }} {
      padding: 10px 16px;
      font-size: {{ block.settings.tab_font_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<tab-accordion-{{ ai_gen_id }} class="ai-tab-accordion-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-tab-accordion__tabs-{{ ai_gen_id }}" role="tablist">
    <button
      class="ai-tab-accordion__tab-{{ ai_gen_id }} active"
      role="tab"
      aria-selected="true"
      aria-controls="shipping-panel-{{ ai_gen_id }}"
      data-tab="shipping"
    >
      {{ block.settings.shipping_tab_title }}
    </button>
    <button
      class="ai-tab-accordion__tab-{{ ai_gen_id }}"
      role="tab"
      aria-selected="false"
      aria-controls="delivery-panel-{{ ai_gen_id }}"
      data-tab="delivery"
    >
      {{ block.settings.delivery_tab_title }}
    </button>
    <button
      class="ai-tab-accordion__tab-{{ ai_gen_id }}"
      role="tab"
      aria-selected="false"
      aria-controls="return-panel-{{ ai_gen_id }}"
      data-tab="return"
    >
      {{ block.settings.return_tab_title }}
    </button>
  </div>

  <div
    id="shipping-panel-{{ ai_gen_id }}"
    class="ai-tab-accordion__content-{{ ai_gen_id }} active"
    role="tabpanel"
    data-panel="shipping"
  >
    {% for i in (1..3) %}
      {% liquid
        assign question_key = 'shipping_question_' | append: i
        assign answer_key = 'shipping_answer_' | append: i
        assign question = block.settings[question_key]
        assign answer = block.settings[answer_key]
      %}
      {% if question != blank %}
        <div class="ai-tab-accordion__item-{{ ai_gen_id }}">
          <button
            class="ai-tab-accordion__header-{{ ai_gen_id }}"
            aria-expanded="false"
          >
            <span>{{ question }}</span>
            <svg class="ai-tab-accordion__icon-{{ ai_gen_id }}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="ai-tab-accordion__body-{{ ai_gen_id }}">
            <div class="ai-tab-accordion__text-{{ ai_gen_id }}">{{ answer }}</div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div
    id="delivery-panel-{{ ai_gen_id }}"
    class="ai-tab-accordion__content-{{ ai_gen_id }}"
    role="tabpanel"
    data-panel="delivery"
  >
    {% for i in (1..3) %}
      {% liquid
        assign question_key = 'delivery_question_' | append: i
        assign answer_key = 'delivery_answer_' | append: i
        assign question = block.settings[question_key]
        assign answer = block.settings[answer_key]
      %}
      {% if question != blank %}
        <div class="ai-tab-accordion__item-{{ ai_gen_id }}">
          <button
            class="ai-tab-accordion__header-{{ ai_gen_id }}"
            aria-expanded="false"
          >
            <span>{{ question }}</span>
            <svg class="ai-tab-accordion__icon-{{ ai_gen_id }}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="ai-tab-accordion__body-{{ ai_gen_id }}">
            <div class="ai-tab-accordion__text-{{ ai_gen_id }}">{{ answer }}</div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div
    id="return-panel-{{ ai_gen_id }}"
    class="ai-tab-accordion__content-{{ ai_gen_id }}"
    role="tabpanel"
    data-panel="return"
  >
    {% for i in (1..3) %}
      {% liquid
        assign question_key = 'return_question_' | append: i
        assign answer_key = 'return_answer_' | append: i
        assign question = block.settings[question_key]
        assign answer = block.settings[answer_key]
      %}
      {% if question != blank %}
        <div class="ai-tab-accordion__item-{{ ai_gen_id }}">
          <button
            class="ai-tab-accordion__header-{{ ai_gen_id }}"
            aria-expanded="false"
          >
            <span>{{ question }}</span>
            <svg class="ai-tab-accordion__icon-{{ ai_gen_id }}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="ai-tab-accordion__body-{{ ai_gen_id }}">
            <div class="ai-tab-accordion__text-{{ ai_gen_id }}">{{ answer }}</div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</tab-accordion-{{ ai_gen_id }}>

<script>
  (function() {
    class TabAccordion{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.tabs = this.querySelectorAll('.ai-tab-accordion__tab-{{ ai_gen_id }}');
        this.panels = this.querySelectorAll('.ai-tab-accordion__content-{{ ai_gen_id }}');
        this.accordionHeaders = this.querySelectorAll('.ai-tab-accordion__header-{{ ai_gen_id }}');

        this.setupTabs();
        this.setupAccordions();
      }

      setupTabs() {
        this.tabs.forEach((tab) => {
          tab.addEventListener('click', () => {
            const targetPanel = tab.getAttribute('data-tab');

            this.tabs.forEach((t) => {
              t.classList.remove('active');
              t.setAttribute('aria-selected', 'false');
            });

            this.panels.forEach((p) => {
              p.classList.remove('active');
            });

            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');

            const panel = this.querySelector(`[data-panel="${targetPanel}"]`);
            if (panel) {
              panel.classList.add('active');
            }

            const openAccordions = panel.querySelectorAll('.ai-tab-accordion__body-{{ ai_gen_id }}.active');
            openAccordions.forEach((accordion) => {
              accordion.classList.remove('active');
              accordion.previousElementSibling.setAttribute('aria-expanded', 'false');
            });
          });
        });
      }

      setupAccordions() {
        this.accordionHeaders.forEach((header) => {
          header.addEventListener('click', () => {
            const body = header.nextElementSibling;
            const isExpanded = header.getAttribute('aria-expanded') === 'true';

            header.setAttribute('aria-expanded', !isExpanded);
            body.classList.toggle('active');
          });
        });
      }
    }

    customElements.define('tab-accordion-{{ ai_gen_id }}', TabAccordion{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Shipping delivery return",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Tab titles"
    },
    {
      "type": "text",
      "id": "shipping_tab_title",
      "label": "Shipping tab",
      "default": "Shipping"
    },
    {
      "type": "text",
      "id": "delivery_tab_title",
      "label": "Delivery tab",
      "default": "Delivery"
    },
    {
      "type": "text",
      "id": "return_tab_title",
      "label": "Return tab",
      "default": "Return"
    },
    {
      "type": "header",
      "content": "Shipping"
    },
    {
      "type": "text",
      "id": "shipping_question_1",
      "label": "Question 1",
      "default": "What are the shipping costs?"
    },
    {
      "type": "richtext",
      "id": "shipping_answer_1",
      "label": "Answer 1",
      "default": "<p>Shipping costs vary based on your location and order size. Free shipping is available on orders over a certain amount.</p>"
    },
    {
      "type": "text",
      "id": "shipping_question_2",
      "label": "Question 2",
      "default": "Which countries do you ship to?"
    },
    {
      "type": "richtext",
      "id": "shipping_answer_2",
      "label": "Answer 2",
      "default": "<p>We ship to most countries worldwide. Please check our shipping policy for a complete list of destinations.</p>"
    },
    {
      "type": "text",
      "id": "shipping_question_3",
      "label": "Question 3",
      "default": "Do you offer express shipping?"
    },
    {
      "type": "richtext",
      "id": "shipping_answer_3",
      "label": "Answer 3",
      "default": "<p>Yes, express shipping options are available at checkout for faster delivery.</p>"
    },
    {
      "type": "header",
      "content": "Delivery"
    },
    {
      "type": "text",
      "id": "delivery_question_1",
      "label": "Question 1",
      "default": "How long does delivery take?"
    },
    {
      "type": "richtext",
      "id": "delivery_answer_1",
      "label": "Answer 1",
      "default": "<p>Standard delivery typically takes 5-7 business days. Express delivery is available for 2-3 business days.</p>"
    },
    {
      "type": "text",
      "id": "delivery_question_2",
      "label": "Question 2",
      "default": "Can I track my order?"
    },
    {
      "type": "richtext",
      "id": "delivery_answer_2",
      "label": "Answer 2",
      "default": "<p>Yes, you will receive a tracking number via email once your order has been shipped.</p>"
    },
    {
      "type": "text",
      "id": "delivery_question_3",
      "label": "Question 3",
      "default": "What if I'm not home for delivery?"
    },
    {
      "type": "richtext",
      "id": "delivery_answer_3",
      "label": "Answer 3",
      "default": "<p>The courier will leave a notice with instructions for redelivery or pickup at a nearby location.</p>"
    },
    {
      "type": "header",
      "content": "Return"
    },
    {
      "type": "text",
      "id": "return_question_1",
      "label": "Question 1",
      "default": "What is your return policy?"
    },
    {
      "type": "richtext",
      "id": "return_answer_1",
      "label": "Answer 1",
      "default": "<p>We accept returns within 30 days of delivery. Items must be unused and in original packaging.</p>"
    },
    {
      "type": "text",
      "id": "return_question_2",
      "label": "Question 2",
      "default": "How do I initiate a return?"
    },
    {
      "type": "richtext",
      "id": "return_answer_2",
      "label": "Answer 2",
      "default": "<p>Contact our customer service team with your order number to start the return process.</p>"
    },
    {
      "type": "text",
      "id": "return_question_3",
      "label": "Question 3",
      "default": "Who pays for return shipping?"
    },
    {
      "type": "richtext",
      "id": "return_answer_3",
      "label": "Answer 3",
      "default": "<p>Return shipping costs are the responsibility of the customer unless the item is defective or incorrect.</p>"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "tab_text_color",
      "label": "Tab text",
      "default": "#677279"
    },
    {
      "type": "color",
      "id": "tab_active_color",
      "label": "Active tab",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border",
      "default": "#e5e5e5"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon",
      "default": "#1a1a1a"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "padding",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "tab_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Tab font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "accordion_font_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Question font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "content_font_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Answer font size",
      "default": 14
    }
  ],
  "presets": [
    {
      "name": "Shipping delivery return"
    }
  ]
}
{% endschema %}
