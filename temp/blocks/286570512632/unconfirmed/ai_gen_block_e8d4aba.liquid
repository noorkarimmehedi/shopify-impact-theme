{% doc %}
  @prompt
    create a collection section where in mobile version  3 products should be visible one in the middle and the rest two on left and right side. the middle one slightly big the rest two same size . also use arrow below that to navigate between products. and also i want clickable neobrutalism ui. from color to shadow to font to radius all should be customizable, this isn't optimised for mobile version, still the product cards so long in mobile version and also every time there should be three products sho. with same product image size and small view product button, on mobile version the left and right product still so long. if possible show them half and fully optimised and beautiful for mobile version, the left and right product should have same product image size and product card size should be small in length. so that it will visually beautiful also when i click arrow next product should become big and other two same size , but i wanted three products one main and the rest two should be half visibile on left and right side on smaller product card with same image size and all, the main product should be in the middle and i don't like the animation when i click the arrow to see another product. from the very first the three products should be visible not a single product, still  idon't like the animation when i click the arrow to see another product should be more smooth. from the very first the three products should be visible not single product. when i add collection first it shows one single product i need to press arrow key to see three products at a time. from the first it should show three products , all font should be customizable , the main card should be more visible card size more big and also left and right product should be half visible keeping same card size, all fonts can't be visible from shopify fix it, this is what visible: @font-face { font-family: Arapey; font-weight: 400; font-style: normal; font-display: swap; src: url("https://fonts.shopifycdn.com/arapey/arapey_n4.f34340ab9c56baa7f8accf674e253407b725d12c.woff2") format("woff2"), url("https://fonts.shopifycdn.com/arapey/arapey_n4.003d1426f62522643e43e1d3072a2e7d1ab78130.woff") format("woff"); } @font-face { font-family: Assistant; font-weight: 400; font-style: normal; font-display: swap; src: url("https://fonts.shopifycdn.com/assistant/assistant_n4.9120912a469cad1cc292572851508ca49d12e768.woff2") format("woff2"), url("https://fonts.shopifycdn.com/assistant/assistant_n4.6e9875ce64e0fefcd3f4446b7ec9036b3ddd2985.woff") format("woff"); } @font-face { font-family: Assistant; font-weight: 700; font-style: normal; font-display: swap; src: url("https://fonts.shopifycdn.com/assistant/assistant_n7.bf44452348ec8b8efa3aa3068825305886b1c83c.woff2") format("woff2"), url("https://fonts.shopifycdn.com/assistant/assistant_n7.0c887fee83f6b3bda822f1150b912c72da0f7b64.woff") format("woff"); } @font-face { font-family: Assistant; font-weight: 700; font-style: normal; font-display: swap; src: url("https://fonts.shopifycdn.com/assistant/assistant_n7.bf44452348ec8b8efa3aa3068825305886b1c83c.woff2") format("woff2"), url("https://fonts.shopifycdn.com/assistant/assistant_n7.0c887fee83f6b3bda822f1150b912c72da0f7b64.woff") format("woff"); } @font-face { font-family: Assistant; font-weight: 700; font-style: normal; font-display: swap; src: url("https://fonts.shopifycdn.com/assistant/assistant_n7.bf44452348ec8b8efa3aa3068825305886b1c83c.woff2") format("woff2"), url("https://fonts.shopifycdn.com/assistant/assistant_n7.0c887fee83f6b3bda822f1150b912c72da0f7b64.woff") format("woff"); }, section background color arrow buttons colors should be customizable 
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{{ block.settings.heading_font | font_face: font_display: 'swap' }}
{{ block.settings.title_font | font_face: font_display: 'swap' }}
{{ block.settings.price_font | font_face: font_display: 'swap' }}
{{ block.settings.button_font | font_face: font_display: 'swap' }}

{% style %}
  .ai-neo-collection-{{ ai_gen_id }} {
    padding: {{ block.settings.section_padding_mobile }}px 0;
    background-color: {{ block.settings.section_background }};
  }

  @media screen and (min-width: 750px) {
    .ai-neo-collection-{{ ai_gen_id }} {
      padding: {{ block.settings.section_padding_desktop }}px 0;
    }
  }

  .ai-neo-collection__heading-{{ ai_gen_id }} {
    text-align: center;
    margin: 0 0 {{ block.settings.heading_spacing }}px;
    padding: 0 20px;
    font-family: {{ block.settings.heading_font.family }}, {{ block.settings.heading_font.fallback_families }};
    font-weight: {{ block.settings.heading_font.weight }};
    font-size: {{ block.settings.heading_size_mobile }}px;
    color: {{ block.settings.heading_color }};
  }

  @media screen and (min-width: 750px) {
    .ai-neo-collection__heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size_desktop }}px;
    }
  }

  .ai-neo-collection__carousel-wrapper-{{ ai_gen_id }} {
    position: relative;
    max-width: 100%;
    margin: 0 auto;
  }

  .ai-neo-collection__carousel-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: {{ block.settings.card_gap }}px;
    padding: 0 20px;
    overflow: visible;
  }

  .ai-neo-collection__card-{{ ai_gen_id }} {
    flex-shrink: 0;
    background: {{ block.settings.card_background }};
    border: {{ block.settings.card_border_width }}px solid {{ block.settings.card_border_color }};
    border-radius: {{ block.settings.card_border_radius }}px;
    box-shadow: {{ block.settings.card_shadow_x }}px {{ block.settings.card_shadow_y }}px 0 {{ block.settings.card_shadow_color }};
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden;
    opacity: 0.6;
    transform: scale(0.85);
  }

  .ai-neo-collection__card-{{ ai_gen_id }}.active {
    opacity: 1;
    transform: scale(1);
    width: 65%;
    max-width: 280px;
  }

  .ai-neo-collection__card-{{ ai_gen_id }}:not(.active) {
    width: 40%;
    max-width: 160px;
  }

  @media screen and (min-width: 750px) {
    .ai-neo-collection__card-{{ ai_gen_id }}.active {
      width: 320px;
    }

    .ai-neo-collection__card-{{ ai_gen_id }}:not(.active) {
      width: 200px;
    }
  }

  .ai-neo-collection__card-{{ ai_gen_id }}:hover {
    transform: scale(0.85) translateY(-2px);
    box-shadow: {{ block.settings.card_shadow_x | plus: 2 }}px {{ block.settings.card_shadow_y | plus: 2 }}px 0 {{ block.settings.card_shadow_color }};
  }

  .ai-neo-collection__card-{{ ai_gen_id }}.active:hover {
    transform: scale(1) translateY(-2px);
  }

  .ai-neo-collection__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    padding-bottom: 100%;
    overflow: hidden;
    background: {{ block.settings.image_background }};
  }

  .ai-neo-collection__image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-neo-collection__info-{{ ai_gen_id }} {
    padding: {{ block.settings.card_padding }}px;
  }

  .ai-neo-collection__title-{{ ai_gen_id }} {
    margin: 0 0 8px;
    font-family: {{ block.settings.title_font.family }}, {{ block.settings.title_font.fallback_families }};
    font-weight: {{ block.settings.title_font.weight }};
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .ai-neo-collection__price-{{ ai_gen_id }} {
    margin: 0 0 12px;
    font-family: {{ block.settings.price_font.family }}, {{ block.settings.price_font.fallback_families }};
    font-weight: {{ block.settings.price_font.weight }};
    font-size: {{ block.settings.price_size }}px;
    color: {{ block.settings.price_color }};
  }

  .ai-neo-collection__button-{{ ai_gen_id }} {
    display: inline-block;
    width: 100%;
    padding: {{ block.settings.button_padding }}px;
    background: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    border: {{ block.settings.button_border_width }}px solid {{ block.settings.button_border_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    box-shadow: {{ block.settings.button_shadow_x }}px {{ block.settings.button_shadow_y }}px 0 {{ block.settings.button_shadow_color }};
    font-family: {{ block.settings.button_font.family }}, {{ block.settings.button_font.fallback_families }};
    font-weight: {{ block.settings.button_font.weight }};
    font-size: {{ block.settings.button_size }}px;
    text-align: center;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .ai-neo-collection__button-{{ ai_gen_id }}:hover {
    background: {{ block.settings.button_hover_background }};
    color: {{ block.settings.button_hover_text_color }};
    transform: translate(2px, 2px);
    box-shadow: {{ block.settings.button_shadow_x | minus: 2 }}px {{ block.settings.button_shadow_y | minus: 2 }}px 0 {{ block.settings.button_shadow_color }};
  }

  .ai-neo-collection__nav-{{ ai_gen_id }} {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-top: {{ block.settings.nav_spacing }}px;
  }

  .ai-neo-collection__arrow-{{ ai_gen_id }} {
    width: {{ block.settings.arrow_size }}px;
    height: {{ block.settings.arrow_size }}px;
    background: {{ block.settings.arrow_background }};
    border: {{ block.settings.arrow_border_width }}px solid {{ block.settings.arrow_border_color }};
    border-radius: {{ block.settings.arrow_border_radius }}px;
    box-shadow: {{ block.settings.arrow_shadow_x }}px {{ block.settings.arrow_shadow_y }}px 0 {{ block.settings.arrow_shadow_color }};
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .ai-neo-collection__arrow-{{ ai_gen_id }}:hover {
    background: {{ block.settings.arrow_hover_background }};
    transform: translate(2px, 2px);
    box-shadow: {{ block.settings.arrow_shadow_x | minus: 2 }}px {{ block.settings.arrow_shadow_y | minus: 2 }}px 0 {{ block.settings.arrow_shadow_color }};
  }

  .ai-neo-collection__arrow-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    stroke: {{ block.settings.arrow_icon_color }};
    stroke-width: 3;
  }

  .ai-neo-collection__empty-{{ ai_gen_id }} {
    text-align: center;
    padding: 40px 20px;
    color: {{ block.settings.heading_color }};
    font-size: 16px;
  }
{% endstyle %}

<div class="ai-neo-collection-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.heading != blank %}
    <h2 class="ai-neo-collection__heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
  {% endif %}

  {% if block.settings.collection != blank and block.settings.collection.products.size > 0 %}
    <div class="ai-neo-collection__carousel-wrapper-{{ ai_gen_id }}">
      <div class="ai-neo-collection__carousel-{{ ai_gen_id }}" data-carousel>
        {% for product in block.settings.collection.products limit: block.settings.products_to_show %}
          <div class="ai-neo-collection__card-{{ ai_gen_id }} {% if forloop.index == 2 %}active{% endif %}" data-card>
            <a href="{{ product.url }}" class="ai-neo-collection__link-{{ ai_gen_id }}">
              <div class="ai-neo-collection__image-wrapper-{{ ai_gen_id }}">
                {% if product.featured_image %}
                  <img
                    src="{{ product.featured_image | image_url: width: 600 }}"
                    alt="{{ product.featured_image.alt | escape }}"
                    class="ai-neo-collection__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="600"
                    height="600"
                  >
                {% else %}
                  <div class="ai-neo-collection__placeholder-{{ ai_gen_id }}">
                    {{ 'product-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </div>
            </a>

            <div class="ai-neo-collection__info-{{ ai_gen_id }}">
              <h3 class="ai-neo-collection__title-{{ ai_gen_id }}">{{ product.title }}</h3>
              <div class="ai-neo-collection__price-{{ ai_gen_id }}">{{ product.price | money }}</div>
              <a href="{{ product.url }}" class="ai-neo-collection__button-{{ ai_gen_id }}">
                {{ block.settings.button_text }}
              </a>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="ai-neo-collection__nav-{{ ai_gen_id }}">
        <button class="ai-neo-collection__arrow-{{ ai_gen_id }}" data-prev aria-label="Previous product">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M15 18L9 12L15 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="ai-neo-collection__arrow-{{ ai_gen_id }}" data-next aria-label="Next product">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M9 18L15 12L9 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  {% else %}
    <div class="ai-neo-collection__empty-{{ ai_gen_id }}">
      Please select a collection to display products
    </div>
  {% endif %}
</div>

<script>
  (function() {
    class NeoCollectionCarousel{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.currentIndex = 1;
        this.cards = [];
        this.prevBtn = null;
        this.nextBtn = null;
      }

      connectedCallback() {
        this.cards = Array.from(this.querySelectorAll('[data-card]'));
        this.prevBtn = this.querySelector('[data-prev]');
        this.nextBtn = this.querySelector('[data-next]');

        if (this.cards.length === 0) return;

        this.prevBtn?.addEventListener('click', () => this.navigate(-1));
        this.nextBtn?.addEventListener('click', () => this.navigate(1));

        this.updateCards();
      }

      navigate(direction) {
        this.currentIndex += direction;

        if (this.currentIndex < 0) {
          this.currentIndex = this.cards.length - 1;
        } else if (this.currentIndex >= this.cards.length) {
          this.currentIndex = 0;
        }

        this.updateCards();
      }

      updateCards() {
        this.cards.forEach((card, index) => {
          card.classList.toggle('active', index === this.currentIndex);
        });
      }
    }

    customElements.define('neo-collection-carousel-{{ ai_gen_id }}', NeoCollectionCarousel{{ ai_gen_id }});

    document.addEventListener('DOMContentLoaded', () => {
      const carousel = document.querySelector('.ai-neo-collection-{{ ai_gen_id }}');
      if (carousel) {
        const wrapper = document.createElement('neo-collection-carousel-{{ ai_gen_id }}');
        carousel.parentNode.insertBefore(wrapper, carousel);
        wrapper.appendChild(carousel);
      }
    });
  })();
</script>

{% schema %}
{
  "name": "Neobrutalism collection",
  "settings": [
    {
      "type": "header",
      "content": "Collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 3,
      "max": 20,
      "step": 1,
      "label": "Products to show",
      "default": 6
    },
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Collection"
    },
    {
      "type": "font_picker",
      "id": "heading_font",
      "label": "Font",
      "default": "assistant_n4"
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Size (mobile)",
      "default": 24
    },
    {
      "type": "range",
      "id": "heading_size_desktop",
      "min": 20,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Size (desktop)",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Bottom spacing",
      "default": 30
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Section background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "section_padding_mobile",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding (mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_desktop",
      "min": 30,
      "max": 150,
      "step": 10,
      "unit": "px",
      "label": "Section padding (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "card_gap",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Gap between cards",
      "default": 15
    },
    {
      "type": "header",
      "content": "Product card style"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Border color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "card_border_width",
      "min": 1,
      "max": 8,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 3
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "color",
      "id": "card_shadow_color",
      "label": "Shadow color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "card_shadow_x",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Shadow X offset",
      "default": 6
    },
    {
      "type": "range",
      "id": "card_shadow_y",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Shadow Y offset",
      "default": 6
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 8,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Card padding",
      "default": 16
    },
    {
      "type": "color",
      "id": "image_background",
      "label": "Image background",
      "default": "#f5f5f5"
    },
    {
      "type": "header",
      "content": "Product title"
    },
    {
      "type": "font_picker",
      "id": "title_font",
      "label": "Font",
      "default": "assistant_n7"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Product price"
    },
    {
      "type": "font_picker",
      "id": "price_font",
      "label": "Font",
      "default": "assistant_n7"
    },
    {
      "type": "range",
      "id": "price_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Button style"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "View"
    },
    {
      "type": "font_picker",
      "id": "button_font",
      "label": "Font",
      "default": "assistant_n7"
    },
    {
      "type": "range",
      "id": "button_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Background",
      "default": "#ffeb3b"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Hover background",
      "default": "#fdd835"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Hover text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Border color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "button_border_width",
      "min": 1,
      "max": 6,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 3
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 6
    },
    {
      "type": "color",
      "id": "button_shadow_color",
      "label": "Shadow color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "button_shadow_x",
      "min": 0,
      "max": 12,
      "step": 1,
      "unit": "px",
      "label": "Shadow X offset",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_shadow_y",
      "min": 0,
      "max": 12,
      "step": 1,
      "unit": "px",
      "label": "Shadow Y offset",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_padding",
      "min": 6,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Padding",
      "default": 10
    },
    {
      "type": "header",
      "content": "Navigation arrows"
    },
    {
      "type": "range",
      "id": "arrow_size",
      "min": 30,
      "max": 70,
      "step": 5,
      "unit": "px",
      "label": "Size",
      "default": 50
    },
    {
      "type": "color",
      "id": "arrow_background",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "arrow_hover_background",
      "label": "Hover background",
      "default": "#ffeb3b"
    },
    {
      "type": "color",
      "id": "arrow_border_color",
      "label": "Border color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "arrow_border_width",
      "min": 1,
      "max": 6,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 3
    },
    {
      "type": "range",
      "id": "arrow_border_radius",
      "min": 0,
      "max": 35,
      "step": 5,
      "unit": "px",
      "label": "Border radius",
      "default": 10
    },
    {
      "type": "color",
      "id": "arrow_icon_color",
      "label": "Icon color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "arrow_shadow_color",
      "label": "Shadow color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "arrow_shadow_x",
      "min": 0,
      "max": 12,
      "step": 1,
      "unit": "px",
      "label": "Shadow X offset",
      "default": 4
    },
    {
      "type": "range",
      "id": "arrow_shadow_y",
      "min": 0,
      "max": 12,
      "step": 1,
      "unit": "px",
      "label": "Shadow Y offset",
      "default": 4
    },
    {
      "type": "range",
      "id": "nav_spacing",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Top spacing",
      "default": 30
    }
  ],
  "presets": [
    {
      "name": "Neobrutalism collection"
    }
  ]
}
{% endschema %}